<ww-header title="{{title}}"
[settingsActive]="false"
[backRoute]='back' />
<ww-loader/>
<ion-content>
  <ion-img src="assets/img/ww-logo-cropped.png"></ion-img>
  <div *ngIf="change; else set">
    <div *ngIf="!codeSent">
      <div class="input-container">
        <ww-button
        class="submit-button"
        text="Change PIN"
        color="#861486"
        activate="#510E51"
        border="#fff"
        (click)="changePassword()"
        />
      </div>
    </div>
    <div *ngIf="codeSent">
      <h1 id="email-message">We've emailed you a verification code</h1>
      <div class="center-container">
        <div class="password-input">
          <label for="Code">Verification code:</label><br/>
          <input 
            id="Code"
            label-placement="floating"
            fill="outline"
            placeholder="Code"
            [(ngModel)]="validationCode"
          />
        </div>
      </div>
      <div class="center-container">        
        <div class="password-input">
          <label for="password">New PIN</label> <br>
          <input
            id="password"
            type="password"
            label-placement="floating"
            placeholder="Password"
            [(ngModel)]="password"
            />
            <br>
          <ion-text id="pin-help-text" color="danger" *ngIf="!isPasswordValid()">
            * 4 digit password
          </ion-text>
        </div>
      </div>
      
      <div class="input-container">
        <ww-button
            class="submit-button"
            text="Set PIN"
            color="#861486"
            activate="#510E51"
            border="#fff"
            (click)="setPassword()"
            />
      </div>
    </div>
  </div>
  <ng-template #set>
    <h1 id="pin-title-text">Set a parental access PIN</h1>
    <div class="center-container">        
      <div class="password-input">
        <label for="password">New PIN</label> <br>
        <input
          id="password"
          type="password"
          label-placement="floating"
          placeholder="Password"
          [(ngModel)]="password"
          />
          <br>
        <ion-text id="pin-help-text" color="danger" *ngIf="!isPasswordValid()">
          * 4 digit password
        </ion-text>
      </div>
    </div>
    
    <div class="input-container">
      <ww-button
          class="submit-button"
          text="Set PIN"
          color="#861486"
          activate="#510E51"
          border="#fff"
          (click)="setPassword()"
          />
    </div>
  </ng-template>

  
</ion-content>  